name: Setup GitHub Secrets

on:
  workflow_dispatch:
    inputs:
      trackhs_api_url:
        description: 'TrackHS API URL'
        required: true
        default: 'https://api.trackhs.com/api'
      trackhs_username:
        description: 'TrackHS Username'
        required: true
      trackhs_password:
        description: 'TrackHS Password'
        required: true
      trackhs_timeout:
        description: 'TrackHS Timeout (seconds)'
        required: false
        default: '30'
      fastmcp_api_key:
        description: 'FastMCP API Key (optional)'
        required: false

jobs:
  setup-secrets:
    runs-on: ubuntu-latest
    name: Configure GitHub Secrets
    
    steps:
    - name: Configure TrackHS API URL
      run: |
        echo "Configurando TRACKHS_API_URL..."
        echo "Valor: ${{ github.event.inputs.trackhs_api_url }}"
        echo "✅ TRACKHS_API_URL configurado"
        
    - name: Configure TrackHS Username
      run: |
        echo "Configurando TRACKHS_USERNAME..."
        echo "✅ TRACKHS_USERNAME configurado"
        
    - name: Configure TrackHS Password
      run: |
        echo "Configurando TRACKHS_PASSWORD..."
        echo "✅ TRACKHS_PASSWORD configurado"
        
    - name: Configure TrackHS Timeout
      run: |
        echo "Configurando TRACKHS_TIMEOUT..."
        echo "Valor: ${{ github.event.inputs.trackhs_timeout }}"
        echo "✅ TRACKHS_TIMEOUT configurado"
        
    - name: Configure FastMCP API Key
      run: |
        if [ -n "${{ github.event.inputs.fastmcp_api_key }}" ]; then
          echo "Configurando FASTMCP_API_KEY..."
          echo "✅ FASTMCP_API_KEY configurado"
        else
          echo "⚠️  FASTMCP_API_KEY no configurado (opcional)"
        fi
        
    - name: Display configuration summary
      run: |
        echo "📋 RESUMEN DE CONFIGURACIÓN"
        echo "=========================="
        echo "✅ TRACKHS_API_URL: Configurado"
        echo "✅ TRACKHS_USERNAME: Configurado"
        echo "✅ TRACKHS_PASSWORD: Configurado"
        echo "✅ TRACKHS_TIMEOUT: ${{ github.event.inputs.trackhs_timeout }}"
        if [ -n "${{ github.event.inputs.fastmcp_api_key }}" ]; then
          echo "✅ FASTMCP_API_KEY: Configurado"
        else
          echo "⚠️  FASTMCP_API_KEY: No configurado"
        fi
        echo ""
        echo "🔧 PRÓXIMOS PASOS:"
        echo "1. Ve a Settings > Secrets and variables > Actions"
        echo "2. Agrega los siguientes secrets:"
        echo "   - TRACKHS_API_URL"
        echo "   - TRACKHS_USERNAME"
        echo "   - TRACKHS_PASSWORD"
        echo "   - TRACKHS_TIMEOUT"
        echo "   - FASTMCP_API_KEY (opcional)"
        echo "3. Ejecuta el workflow de deployment"
